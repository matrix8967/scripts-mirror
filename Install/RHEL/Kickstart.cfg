# Generated by Anaconda 34.25.2.10
# Generated by pykickstart v3.32
#version=RHEL9
# Use text mode install
text
# Reboot after installation
reboot

%post
#!/usr/bin/env bash

RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m'    # No Color

#####
## RHEL 9
#####

#sudo subscription-manager repos --enable codeready-builder-for-rhel-9-$(arch)-rpms && sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
#sudo dnf install --nogpgcheck https://mirrors.rpmfusion.org/free/el/rpmfusion-free-release-$(rpm -E %rhel).noarch.rpm https://mirrors.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-$(rpm -E %rhel).noarch.rpm]]]

# Install Dev Tools

sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended

git clone https://github.com/romkatv/powerlevel10k.git ~/.oh-my-zsh/themes/powerlevel10k
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
git clone https://github.com/redxtech/zsh-kitty ~/.oh-my-zsh/custom/plugins/zsh-kitty
git clone https://github.com/TamCore/autoupdate-oh-my-zsh-plugins ~/.oh-my-zsh/custom/plugins/autoupdate

cp ../Configs/Shell/Zsh/zshrc ~/.zshrc
cp ../Configs/Shell/P10k/p10k.zsh ~/.p10k.zsh

# Install Tmux

cp ../Configs/Shell/tmux.conf ~/.tmux.conf
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Install Vundle.

git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
cp ../Configs/Shell/vimrc ~/.vimrc
vim +PluginInstall +qall
sudo cp -r /home/$USER/.vim* /root/


%end

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# Firewall configuration
firewall --enabled --port=8967:tcp --service=ssh
# Network information
network  --bootproto=dhcp --device=link --activate

%packages
@additional-devel
@backup-client
@console-internet
@debugging
@development
@file-server
@hardware-monitoring
@identity-management-server
@network-server
@network-tools
@performance
@platform-devel
@security-tools
@virtualization-client
@virtualization-platform
@virtualization-tools
@web-server
adb
aide
ansible
asciinema
bacula-client
bat
bpftrace
brasero
cargo
cheese
cmake
curl
dmidecode
dnf-plugins-core
exif
fail2ban
fastboot
fence-virtd-libvirt
fence-virtd-multicast
fence-virtd-serial
figlet
flatpak
flatpak-builder
flatpak-selinux
flatpak-session-helper
ftp
fwupd
gedit
gedit-plugins
git
glances
gnome-tweaks
golang
gparted
hmaccalc
htop
httpie
iftop
iotop
ipcalc
iperf3
ipset
iptraf-ng
isns-utils
kitty
libguestfs-inspect-icons
libguestfs-tools
libguestfs-tools-c
libreswan
libvirt
lksctp-tools
lm_sensors
lxc
memcached
memtest86+
minicom
mod_auth_gssapi
mod_security
mod_security-mlogc
mod_security_crs
mono-complete
most
mrtg
msr-tools
nano
ncdu
neofetch
netlabel_tools
nfs-utils
nmap
nmstate
nodejs
npm
openscap
openscap-engine-sce
openscap-utils
openvpn
pipx
powerline-fonts
powertop
pwgen
python-pip
python3-libs
python3-pip
python3-setuptools
radvd
rear
rsyslog-gnutls
rsyslog-gssapi
rsyslog-mysql
rsyslog-relp
ruby
scap-security-guide-doc
scap-workbench
screen
stunnel
systemtap-client
systemtap-initscript
thunderbird
tldr
tlp
tlp-rdw
tmux
unzip
util-linux-user
vim
vulkan-tools
vulkan-validation-layers
whois
wireguard-tools
wireshark
xdp-tools
xinput
zsh

%end

# SELinux configuration
selinux --enforcing

firstboot --disable
# Do not configure the X Window System
skipx

# Generated using Blivet version 3.6.0
ignoredisk --only-use=vda
# System bootloader configuration
bootloader --append="rhgb quiet crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M" --location=mbr --boot-drive=vda
autopart
# Clear the Master Boot Record
zerombr
# Partition clearing information
clearpart --all --initlabel

# System timezone
timezone America/Chicago --utc

# Root password
rootpw --iscrypted $2b$10$kCWEuZZZHnxiMBxbb.B4Oe3yc51UXGCJF4G2Fu/KWYQ2AY2cE.h5m
user --groups=tty,libvirt-qemu,gamemode,qemu,games,docker,nintendo_switch,libvirt,wheel --name=rexuser --password=$6$HK2ul3bdRf1dnt4W$ECly4GA9vh1bNKnhFoGPiiqNLfDCMBqXyTimSKqvazvuYO1Ot5ISijRwacZv6bLizop6OFwHElpLs/2lpbTpl. --iscrypted --gecos="rexuser"
